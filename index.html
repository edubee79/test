<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>TOEIC Actual Test - Clear View</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #333; font-family: sans-serif; }
        
        /* 상단 바 */
        .header-bar {
            height: 45px; background: #1a1a1a; color: #fff;
            display: flex; align-items: center; justify-content: space-between; padding: 0 20px;
        }
        #timer { color: #00ff00; font-size: 22px; font-weight: bold; font-family: monospace; }

        .main-layout { display: flex; height: calc(100% - 45px); width: 100%; }

        /* 시험지 영역 (90%) - 브라우저 순정 뷰어 삽입 */
        .viewer-container {
            width: 90%; height: 100%; background: #525659;
        }

        /* OMR 영역 (10%) */
        .omr-panel {
            width: 10%; height: 100%; background: #ffffff; 
            border-left: 2px solid #222; overflow-y: auto; 
            display: flex; flex-direction: column; align-items: center; padding: 15px 0;
            box-sizing: border-box;
        }
        .omr-row { margin-bottom: 6px; font-size: 12px; font-weight: bold; }
        .omr-row input { margin: 0 1px; cursor: pointer; width: 14px; height: 14px; }
        
        .btn { padding: 5px 12px; border-radius: 4px; cursor: pointer; font-weight: bold; border: none; }
        .btn-full { background: #555; color: white; margin-right: 10px; }
        .btn-submit { background: #007bff; color: white; }
    </style>
</head>
<body>

<div class="header-bar">
    <div id="timer">00:00</div>
    <div style="font-size: 16px;">TOEIC Part 5 & 6 (High Resolution)</div>
    <div>
        <button class="btn btn-full" onclick="toggleFullScreen()">전체 화면</button>
        <button class="btn btn-submit" onclick="gradeTest()">채점 및 종료</button>
    </div>
</div>

<div class="main-layout">
    <div class="viewer-container">
        <embed 
            src="/pdf-proxy/RC1-1part56.pdf?alt=media&token=deef03c4-c3f4-42d3-9399-18a57150fceb#toolbar=0&navpanes=0" 
            type="application/pdf" 
            width="100%" 
            height="100%"
        />
    </div>

    <div class="omr-panel" id="omr-list">
        <b style="margin-bottom:10px; border-bottom: 2px solid #333; width: 85%; text-align: center; padding-bottom:5px;">OMR CARD</b>
    </div>
</div>

<script>
    // 1. 정답 데이터 (101~146) - 필요시 수정하세요
    const answers = {
        101:"1", 102:"2", 103:"3", 104:"4", 105:"1", 106:"2", 107:"3", 108:"4", 109:"3", 110:"1",
        111:"2", 112:"4", 113:"1", 114:"3", 115:"2", 116:"1", 117:"4", 118:"3", 119:"2", 120:"1",
        121:"4", 122:"3", 123:"2", 124:"1", 125:"4", 126:"3", 127:"2", 128:"1", 129:"4", 130:"3",
        131:"1", 132:"2", 133:"3", 134:"4", 135:"1", 136:"2", 137:"3", 138:"4", 139:"1", 140:"2",
        141:"3", 142:"4", 143:"1", 144:"2", 145:"3", 146:"4"
    };

    // 2. OMR 자동 생성
    const omrList = document.getElementById('omr-list');
    for(let i=101; i<=146; i++) {
        omrList.innerHTML += `
            <div class="omr-row">
                ${i}. 
                <input type="radio" name="q${i}" value="1">
                <input type="radio" name="q${i}" value="2">
                <input type="radio" name="q${i}" value="3">
                <input type="radio" name="q${i}" value="4">
            </div>`;
    }

    // 3. 스톱워치 (00:00부터 카운트업)
    let seconds = 0;
    const timerDisplay = document.getElementById('timer');
    const stopwatch = setInterval(() => {
        seconds++;
        let m = Math.floor(seconds / 60);
        let s = seconds % 60;
        timerDisplay.innerText = `${m < 10 ? '0'+m : m}:${s < 10 ? '0'+s : s}`;
    }, 1000);

    // 4. 전체 화면 기능
    function toggleFullScreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            if (document.exitFullscreen) document.exitFullscreen();
        }
    }

    // 5. 자동 채점 기능
    function gradeTest() {
        clearInterval(stopwatch);
        let part5Correct = 0;
        let part6Correct = 0;
        
        for(let i=101; i<=146; i++) {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            if (selected && selected.value === answers[i]) {
                if (i <= 130) part5Correct++;
                else part6Correct++;
            }
        }

        const totalTime = timerDisplay.innerText;
        alert(`
            [채점 완료]
            ----------------------
            진행 시간: ${totalTime}
            ----------------------
            Part 5 (101~130): ${part5Correct} / 30
            Part 6 (131~146): ${part6Correct} / 16
            ----------------------
            총 맞은 개수: ${part5Correct + part6Correct} / 46
        `);
    }
</script>
</body>
</html>
