<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>TOEIC Actual Test - Side by Side</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #333; font-family: sans-serif; }
        
        .header-bar {
            height: 45px; background: #1a1a1a; color: #fff;
            display: flex; align-items: center; justify-content: space-between; padding: 0 20px;
        }
        #timer { color: #00ff00; font-size: 22px; font-weight: bold; font-family: monospace; }

        .main-layout { display: flex; height: calc(100% - 45px); width: 100%; }

        /* 시험지 영역 (90%) */
        .viewer-container {
            width: 90%; height: 100%; display: flex; background: #525659; gap: 2px;
        }

        /* 각 페이지 프레임 (45%씩 차지) */
        .page-frame {
            width: 50%; height: 100%; border: none; background: white;
        }

        /* OMR 영역 (10%) */
        .omr-panel {
            width: 10%; height: 100%; background: #ffffff; 
            border-left: 2px solid #222; overflow-y: auto; 
            display: flex; flex-direction: column; align-items: center; padding: 15px 0;
            box-sizing: border-box;
        }
        .omr-row { margin-bottom: 6px; font-size: 12px; font-weight: bold; }
        .omr-row input { margin: 0 1px; width: 14px; height: 14px; cursor: pointer; }
        
        .btn { padding: 5px 12px; border-radius: 4px; cursor: pointer; font-weight: bold; border: none; }
        .btn-submit { background: #007bff; color: white; }
    </style>
</head>
<body>

<div class="header-bar">
    <div id="timer">00:00</div>
    <div style="font-size: 16px;">TOEIC Part 5 & 6 (High-Res Side-View)</div>
    <button class="btn btn-submit" onclick="gradeTest()">채점 및 종료</button>
</div>

<div class="main-layout">
    <div class="viewer-container">
        <iframe class="page-frame" src="/pdf-proxy/RC1-1part56.pdf?alt=media&token=deef03c4-c3f4-42d3-9399-18a57150fceb#page=1&toolbar=0&navpanes=0"></iframe>
        <iframe class="page-frame" src="/pdf-proxy/RC1-1part56.pdf?alt=media&token=deef03c4-c3f4-42d3-9399-18a57150fceb#page=2&toolbar=0&navpanes=0"></iframe>
    </div>

    <div class="omr-panel" id="omr-list">
        <b style="margin-bottom:10px; border-bottom: 2px solid #333; width: 85%; text-align: center; padding-bottom:5px;">OMR CARD</b>
    </div>
</div>

<script>
    // OMR 생성 (101~146)
    const omrList = document.getElementById('omr-list');
    for(let i=101; i<=146; i++) {
        omrList.innerHTML += `
            <div class="omr-row">
                ${i}. 
                <input type="radio" name="q${i}" value="1">
                <input type="radio" name="q${i}" value="2">
                <input type="radio" name="q${i}" value="3">
                <input type="radio" name="q${i}" value="4">
            </div>`;
    }

    // 스톱워치
    let seconds = 0;
    const timerDisplay = document.getElementById('timer');
    setInterval(() => {
        seconds++;
        let m = Math.floor(seconds / 60);
        let s = seconds % 60;
        timerDisplay.innerText = `${m < 10 ? '0'+m : m}:${s < 10 ? '0'+s : s}`;
    }, 1000);

    // 채점 및 정답 데이터 (101~146)
    const answers = { 101:"1", 102:"2", 103:"3", 104:"4", 105:"1", 106:"2", 107:"3", 108:"4", 109:"3", 110:"1", 111:"2", 112:"4", 113:"1", 114:"3", 115:"2", 116:"1", 117:"4", 118:"3", 119:"2", 120:"1", 121:"4", 122:"3", 123:"2", 124:"1", 125:"4", 126:"3", 127:"2", 128:"1", 129:"4", 130:"3", 131:"1", 132:"2", 133:"3", 134:"4", 135:"1", 136:"2", 137:"3", 138:"4", 139:"1", 140:"2", 141:"3", 142:"4", 143:"1", 144:"2", 145:"3", 146:"4" };

    function gradeTest() {
        let score = 0;
        for(let i=101; i<=146; i++) {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            if (selected && selected.value === answers[i]) score++;
        }
        alert(`소요시간: ${timerDisplay.innerText}\n총 점수: ${score} / 46`);
    }
</script>
</body>
</html>
